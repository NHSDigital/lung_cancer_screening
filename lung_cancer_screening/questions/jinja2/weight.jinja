{% extends 'layout.jinja' %}
{% from 'nhsuk/components/button/macro.jinja' import button %}
{% from 'nhsuk/components/back-link/macro.jinja' import backLink %}
{% from 'nhsuk/components/fieldset/macro.jinja' import fieldset %}

{% set WEIGHT_UNIT = {
    'imperial': 'stone and pounds',
    'metric': 'kilograms'
} %}

{% block beforeContent %}
<nav>
  {{
    backLink({
      "href": url("questions:height"),
      "text": "Back"
    })
  }}
</nav>
{% endblock beforeContent %}

{% block page_content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">
      {% if unit %}
        {% set action_url = request.path + '?unit=' + unit %}
      {% else %}
        {% set action_url = request.path %}
      {% endif %}
      <form action="{{ action_url }}" method="POST" novalidate>
        {{ csrf_input }}
        <h1 class="nhsuk-heading-l">Enter your weight</h1>

        <p>An accurate measurement is important.

        <p>If you have digital scales, use these to check your weight. Some pharmacies and gyms have scales where you can check for free.

        {% call fieldset({
          "legend": {
            "text": "What is your weight",
            "classes": "nhsuk-label--m"
          }
        }) %}

        {% if unit == "imperial" %}
          {{ form.weight_imperial.as_field_group() }}
        {% else %}
          {{ form.weight_metric.as_field_group() }}
        {% endif %}

          <p><a href="?unit={{ switch_to_unit }}">Switch to {{ WEIGHT_UNIT[switch_to_unit] }}</a></p>
        {% endcall %}

        {{ button({
            "text": "Continue"
        }) }}
      </form>
    </div>
  </div>
{% endblock %}
